---
title: An Example Plugin Using Virtual Modules
---

# An Example Plugin

Take a look at the one that I used when I developed this tutorial. It's hiding out in my `vite.config.ts` because I'm _very_ lazy. This bad boy uses the concept of [virtual modules][virtual].

```ts
export const workspacePath = (): Plugin => {
	const virtualModuleId = 'virtual:workspace';
	const resolvedVirtualModuleId = '\0' + virtualModuleId;

	const workspace = new URL('.', import.meta.url);

	return {
		name: 'vite-plugin-workspace',
		resolveId(id) {
			if (id === virtualModuleId) {
				return resolvedVirtualModuleId;
			}
		},
		load(id) {
			if (id === resolvedVirtualModuleId) {
				return `export default function (path) { return new URL(path, "${workspace.href}").pathname; }`;
			}
		}
	};
};
```

## What are virtual modules in Vite?

[Virtual modules][virtual] in Vite are modules that do not correspond to actual files on disk but are instead dynamically generated by plugins during the build process.

They can be imported and used in your application like regular modules, but they exist only in memory and are created on-the-fly by the Vite development server or during the build process.

[Virtual modules][virtual] are a super powerful feature that can be leveraged for various use-cases, such as dynamically creating API endpoints, handling CSS pre-processing, or injecting runtime configuration.

## Some Use Cases

You can use virtual modules for a bunch of cool stuff.

- **Dynamic Configuration**: You can generate configuration data on-the-fly based on environment variables or external services.
- **Dynamic Content**: Fetch content from a database or other external sources during development, useful for CMS-like setups.
- **Code Transformation**: You can preprocess code or create derived data structures that donâ€™t exist as actual files.
- **Utility Modules**: Create reusable modules on-the-fly without having to maintain separate files.

[virtual]: https://vitejs.dev/guide/api-plugin.html#virtual-modules-convention

## `vite-plugin-virtual`

There is also [a plugin](https://github.com/patak-dev/vite-plugin-virtual) that makes this easier if you just need some quick one-off virtual modules.

Here is an example of what it looks like in practice.

```ts
import virtual from 'vite-plugin-virtual';

export default {
	plugins: [
		virtual({
			'virtual:module': `export default { hello: 'world' }`,
			'virtual:config': { hello: 'world' }
		})
	]
};
```
